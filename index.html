<html>
<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/0.10.0/Tone.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="chord-tools.js"></script>
	<script>
		// playChordForNote("C4", "min11");
		$(document).ready(function(){
			////////////////////////
			//
			// SETTINGS
			//
			////////////////////////

			// var userOctave = $('#user-octave').val();
			// var userDuration = $('#user-duration').val();

			// $('#user-octave').change(function() {
			// 	var userOctave = $('#user-octave').val();
			// 	console.log('user changed octave to ' + userOctave);
			// });

			// $('#user-duration').change(function() {
			// 	var userDuration = $('#user-duration').val();
			// 	console.log('user changed duration to ' + userDuration);
			// });

			////////////////////////
			//
			// CONTENT
			//
			////////////////////////

			// start with a title bar
			// first entry is empty (space above chord labels)
			title = '<div class="col"/>';
			// the rest should be pitch names
			$.each(pitches, function(pitch){
				title = title + ('<div class="col">' + pitches[pitch] + '</div>');
			});

			var title = '<div class="row">'+ title +'</div>';
			$('.content').append(title);

			// for each type of chord, build a row
			$.each(chords, function(key, value){
				var columns = "";				

				// start by appending the name of each chord
				columns = columns + ('<div class="col">'+key+'</div>');
				// render the chord as a column for each pitch
				$.each(pitches, function(pitch){
					columns = columns + ('<div class="col chord" data-chord="'+key+'" data-pitch="'+pitches[pitch]+'">' + pitches[pitch] + key + '</div>');
				});

				var row = '<div class="row" data-chord="'+ key +'">'+ columns +'</div>';

				$('.content').append(row);
			});

			$('.chord').click(function(){
				var userOctave = $('#user-octave').val();
				var userDuration = $('#user-duration').val();
				thisChord = $(this).attr('data-chord');
				thisPitch = $(this).attr('data-pitch') + userOctave;
				console.log('playing ' + thisChord + ' ' + thisPitch)
				playChordForNote(thisPitch, thisChord, userDuration);
			});
		});
	</script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.css
">
	<style>
		.settings{
			box-sizing: border-box;
			width: 100%;
			height: 100px;
			padding: 20px;
			background-color: #eee;
			border-bottom: 1px solid #ddd;
		}

		.row{
			display: flex;
			flex-direction: row;
		}

		.col{
			flex: 1;
			margin: 4px;
			padding: 10px 5px;
		}

		.chord{
			background-color: #eee;
			text-align: center;
			border-radius: 3px;
			border: 1px solid #ddd;
		}

		.chord:hover{
			background-color: #ddd;
			cursor: pointer;
		}
	</style>
</head>
<body>
	<div class="settings">
		Octave: 
		<select id="user-octave">
			<option value="2">2</option>
			<option value="3" selected="selected" >3</option>
			<option value="4">4</option>
			<option value="5">5</option>
		</select>

		Preview Length: 
		<select id="user-duration">
			<option value="250">1/4 Sec</option>
			<option value="500" selected="selected" >1/2 Sec</option>
			<option value="1000">1 Sec</option>
			<option value="2000">2 Sec</option>
		</select>
	</div>
	<div class="content"></div>
</body>
</html>